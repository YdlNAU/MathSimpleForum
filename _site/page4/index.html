<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Ja.Code</title>
    <meta name="description" content="">

    <link rel="shortcut icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="icon" href="/favicon.ico?" type="image/x-icon">
    <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_8v3czwksspqlg14i.css">
    <link rel="stylesheet" href="/css/main.css ">
    <link rel="canonical" href="http://localhost:4000/page4/">
    <link rel="alternate" type="application/rss+xml" title="Ja.Code" href="http://localhost:4000/feed.xml ">





</head>


  <body>

    <header id="top">
    <div class="wrapper">
        <a href="/" class="brand">Ja.Code</a>
        <small>猿修地，时光机</small>
        <button id="headerMenu" class="menu"><i class="fa fa-bars"></i></button>
        <nav id="headerNav">
            <ul>
                <li>
                    
                    <a href="/">
                    
                        <i class="fa fa-home"></i>Home
                    </a>
                </li>

                
                    
                    <li>
                        
                        <a href="/archive/">
                        
                            <i class="fa fa-archive"></i>Archives
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/category/">
                        
                            <i class="fa fa-th-list"></i>Categories
                        </a>
                    </li>
                    
                
                    
                    <li>
                        
                        <a href="/tag/">
                        
                            <i class="fa fa-tags"></i>Tags
                        </a>
                    </li>
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
                    
                
            </ul>
        </nav>
    </div>
</header>


        <div class="page clearfix" index>
    <div class="left">
        <img src="https://jacobpan3g.github.io/img/jacob.png" style="width:100px;float:left;margin-right:20px;">
        <h1>Welcome to Ja.Code</h1>
        <small>Follow Excellence. Success will chase you.</small>
        <div>@ Jacob Pan</div>
        <hr>
        <ul>
            
              <li>
                <h2>
                  <a class="post-link" href="/2017/10/07/software-install-record-in-ubuntu/">在Ubuntu下一些软件安装记录</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2017-10-07
                    </div>
                    <div class="label-card">
                        <i class="fa fa-user"></i>Jacob Pan
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#ubuntu" title="Category: ubuntu" rel="category">ubuntu</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                    <div class="label-card">
                    
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <a href="/tag/#config" title="Tag: config" rel="tag">config</a>
    
  

</span>

                    </div>
                </div>
                <div class="excerpt">
                    <ul id="markdown-toc">
  <li><a href="#1-jekyll" id="markdown-toc-1-jekyll">1. jekyll</a></li>
  <li><a href="#2-ssh" id="markdown-toc-2-ssh">2. ssh</a></li>
</ul>

<h2 id="1-jekyll">1. jekyll</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># apt-get install jekyll
</code></pre></div></div>

<h2 id="2-ssh">2. ssh</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># apt-get install openssh-server
</code></pre></div></div>

<hr />
<blockquote>
  <p>Jacob Pan <a href="http://jacobpan3g.github.io/cn">( jacobpan3g.github.io/cn )</a></p>
</blockquote>

                </div>
                <div class="read-all">
                    <a  href="/2017/10/07/software-install-record-in-ubuntu/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2017/10/07/cature-pkt-by-wireshark-in-ubuntu/">在Ubuntu使用wireshark抓无线数据包</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2017-10-07
                    </div>
                    <div class="label-card">
                        <i class="fa fa-user"></i>Jacob Pan
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#ubuntu" title="Category: ubuntu" rel="category">ubuntu</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                    <div class="label-card">
                    
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <a href="/tag/#wireless" title="Tag: wireless" rel="tag">wireless</a>
    
  

</span>

                    </div>
                </div>
                <div class="excerpt">
                    <ul id="markdown-toc">
  <li><a href="#1-安装wireshark" id="markdown-toc-1-安装wireshark">1. 安装wireshark</a></li>
  <li><a href="#2-设置无线网卡为混杂模式" id="markdown-toc-2-设置无线网卡为混杂模式">2. 设置无线网卡为混杂模式</a></li>
  <li><a href="#3-设置要抓包的无线信道" id="markdown-toc-3-设置要抓包的无线信道">3. 设置要抓包的无线信道</a></li>
  <li><a href="#4-解决lua加载错误" id="markdown-toc-4-解决lua加载错误">4. 解决lua加载错误</a></li>
</ul>

<p>众所周知，在windowns下使用wireshark只能抓取有线数据包，要抓无线数据包只能用Omnipeek；而在Linux下，我们可以直接使用wireshark来抓取无线数据包</p>

<h2 id="1-安装wireshark">1. 安装wireshark</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># apt-get install wireshark-qt
</code></pre></div></div>

<p>在安装指引弹出的对话框中，问<code class="highlighter-rouge">是否允许非管理员用户用wireshark抓包</code>，可以选<code class="highlighter-rouge">否</code>。</p>

<h2 id="2-设置无线网卡为混杂模式">2. 设置无线网卡为混杂模式</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># iwconfig wlan0 down
# iwconfig wlan0 mode monitor
# iwconfig wlan0 up
</code></pre></div></div>

<p>其中<code class="highlighter-rouge">wlan0</code>是无线网卡的名字，不同PC可能会不一样，可以通过<code class="highlighter-rouge">iwconfig</code>查看。</p>

<h2 id="3-设置要抓包的无线信道">3. 设置要抓包的无线信道</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># iwconfig wlan0 channel 6
</code></pre></div></div>

<p>最后，就可以打开wireshark开始抓包了，后面的操作和windowns下一样，选定网卡，设置过滤条件… Enjoy it.</p>

<h2 id="4-解决lua加载错误">4. 解决lua加载错误</h2>

<p>若打开wireshark后，老是会弹出<code class="highlighter-rouge">Lua:Error during loading</code>对话框，可以通过以下方法解决：</p>

<p>使用管理员权限编辑文件<code class="highlighter-rouge">/usr/share/wireshark/init.lua</code>，把倒数第二行改成：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>--dofile(DATA_DIR.."console.lua") 
</code></pre></div></div>

<p>这样就不会再弹出错误对话框了。</p>

<hr />
<blockquote>
  <p>Jacob Pan <a href="http://jacobpan3g.github.io/cn">( jacobpan3g.github.io/cn )</a></p>
</blockquote>

                </div>
                <div class="read-all">
                    <a  href="/2017/10/07/cature-pkt-by-wireshark-in-ubuntu/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2017/10/07/smb-in-linux/">Linux使用samba实现与Windows文件共享--最简单的方法</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2017-10-07
                    </div>
                    <div class="label-card">
                        <i class="fa fa-user"></i>Jacob Pan
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#linux" title="Category: linux" rel="category">linux</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                    <div class="label-card">
                    
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <a href="/tag/#config" title="Tag: config" rel="tag">config</a>
    
  

</span>

                    </div>
                </div>
                <div class="excerpt">
                    <ul id="markdown-toc">
  <li><a href="#1-下载samba" id="markdown-toc-1-下载samba">1. 下载samba</a></li>
  <li><a href="#2-修改配置文件" id="markdown-toc-2-修改配置文件">2. 修改配置文件</a></li>
  <li><a href="#3-添加smb用户" id="markdown-toc-3-添加smb用户">3. 添加smb用户</a></li>
  <li><a href="#4-重启smbd" id="markdown-toc-4-重启smbd">4. 重启smbd</a></li>
  <li><a href="#问题及解决方法" id="markdown-toc-问题及解决方法">问题及解决方法</a>    <ul>
      <li><a href="#win无法访问" id="markdown-toc-win无法访问">win无法访问</a></li>
    </ul>
  </li>
</ul>

<h2 id="1-下载samba">1. 下载samba</h2>

<p>Ubuntu下</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># apt-get install samba
</code></pre></div></div>

<h2 id="2-修改配置文件">2. 修改配置文件</h2>

<p>备份原来的配置文件</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># mv /etc/samba/smb.conf /etc/samba/smb.conf.backup
# touch /etc/samba/smb.conf
</code></pre></div></div>

<p>将一下内容写进新建的配置文件中</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[global]
   security = user

[jsamba]
   path = /home/jacob
   valid users = jacob
   writeable = yes
   public = yes
</code></pre></div></div>

<p>其中，<code class="highlighter-rouge">jacob</code>是我的用户名，这里你改成自己的用户名。</p>

<h2 id="3-添加smb用户">3. 添加smb用户</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># smbpasswd -a jacob
</code></pre></div></div>
<p>同理，这里的<code class="highlighter-rouge">jacob</code>改成你自己的用户，必须要和上述配置的<code class="highlighter-rouge">valid users</code>那一项里的内容相一致</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># smbpasswd -x jacob
</code></pre></div></div>
<p>通过这条命令可以删除用户，更多的选项可见<code class="highlighter-rouge">smbpasswd -h</code></p>

<h2 id="4-重启smbd">4. 重启smbd</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># service smbd restart
# service smbd status
</code></pre></div></div>
<p>第二条命令可以查看当前smbd的运行状态。</p>

<p>大功告成，现在用windows文件浏览器就可以通过ip地址<code class="highlighter-rouge">\\192.168.XX.XX</code>访问你的linux文件了</p>

<h2 id="问题及解决方法">问题及解决方法</h2>

<h3 id="win无法访问">win无法访问</h3>

<p>在lubuntu 14.04下发现用windows登录不上，linux下使用smbclient能登录上</p>

<p>在windows输入ip地址登录不上，提示“\XXX\XXX is not accessible. You might not have permission to use this network resource.”，在linux使用smbclient</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>smbclient <span class="nt">-L</span> 192.168.0.xx       <span class="c"># 列出共享文件夹</span>
smbclient <span class="se">\\</span>192.168.0.xx<span class="se">\x</span>xx    <span class="c"># 访问文件夹</span>
</code></pre></div></div>
<p>链接成功后，就可以使用<code class="highlighter-rouge">ls</code>，<code class="highlighter-rouge">cd</code>等命令访问共享文件夹了。</p>

<p>查看samba的log，在<code class="highlighter-rouge">/var/log/samba/log.smbd</code>，发现有下面错误提示</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Bad talloc magic value - access after free
</code></pre></div></div>
<p>安装一下libtalloc2，重启smbd就能解决</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install libtalloc2
</code></pre></div></div>

<hr />
<blockquote>
  <p>Jacob Pan <a href="http://jacobpan3g.github.io/cn">( jacobpan3g.github.io/cn )</a></p>
</blockquote>

                </div>
                <div class="read-all">
                    <a  href="/2017/10/07/smb-in-linux/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2017/10/07/mount-disk-in-linux/">Linux下挂载硬盘</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2017-10-07
                    </div>
                    <div class="label-card">
                        <i class="fa fa-user"></i>Jacob Pan
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#linux" title="Category: linux" rel="category">linux</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                    <div class="label-card">
                    
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <a href="/tag/#config" title="Tag: config" rel="tag">config</a>
    
  

</span>

                    </div>
                </div>
                <div class="excerpt">
                    <ul id="markdown-toc">
  <li><a href="#1-查看当下pc有哪些硬盘可挂载" id="markdown-toc-1-查看当下pc有哪些硬盘可挂载">1. 查看当下PC有哪些硬盘可挂载</a></li>
  <li><a href="#2-使用命令mount挂载硬盘到特定目录" id="markdown-toc-2-使用命令mount挂载硬盘到特定目录">2. 使用命令mount挂载硬盘到特定目录</a></li>
  <li><a href="#3-卸载硬盘" id="markdown-toc-3-卸载硬盘">3. 卸载硬盘</a></li>
  <li><a href="#4-开机自动挂载设备" id="markdown-toc-4-开机自动挂载设备">4. 开机自动挂载设备</a></li>
</ul>

<h2 id="1-查看当下pc有哪些硬盘可挂载">1. 查看当下PC有哪些硬盘可挂载</h2>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># fdisk -l</span>
</code></pre></div></div>

<h2 id="2-使用命令mount挂载硬盘到特定目录">2. 使用命令mount挂载硬盘到特定目录</h2>

<p>首先，目录一定要是空白的目录，可以通过<code class="highlighter-rouge">mkdir</code>创建一个新目录, 然后通过<code class="highlighter-rouge">mount</code>挂载</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># mount /dev/sda9 ~/mnt/files/</span>
</code></pre></div></div>
<p>一般来说，要挂载的硬盘叫做“设备”，所挂载的目录叫做“挂载点”。</p>

<p>挂载完成后，可以通过</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>df
</code></pre></div></div>
<p>来查看当前PC所挂载的所有硬盘。</p>

<h2 id="3-卸载硬盘">3. 卸载硬盘</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># umount &lt;device&gt;
# umount &lt;mount point&gt;
</code></pre></div></div>
<p>以上两条命令都可以卸载硬盘。</p>

<h2 id="4-开机自动挂载设备">4. 开机自动挂载设备</h2>

<p>编辑<code class="highlighter-rouge">/etc/fstab</code>文件，添加以下类似内容</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/dev/sda5       /home/jacob/mnt/d          ntfs-3g     defaults        0       0
/dev/sda10      /home/jacob/mnt/mind       ext4        defaults        0       0
</code></pre></div></div>

<p>其中，</p>
<ul>
  <li>第一列是设备的名字</li>
  <li>第二列是挂载点</li>
  <li>第三列是设备的类型，其中ext4系统默认支持，ntfs-3g是windowns的硬盘格式，若linux不支持，需要安装<code class="highlighter-rouge">ntfs-3g</code></li>
</ul>

<p>修改完<code class="highlighter-rouge">/etc/fstav</code>后，可采用<code class="highlighter-rouge"># mount -a</code>将所有写在该文件里的设备全部挂载上</p>

<hr />
<blockquote>
  <p>Jacob Pan <a href="http://jacobpan3g.github.io/cn">( jacobpan3g.github.io/cn )</a></p>
</blockquote>

                </div>
                <div class="read-all">
                    <a  href="/2017/10/07/mount-disk-in-linux/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2017/10/07/minicom/">Linux下使用串口工具minicom</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2017-10-07
                    </div>
                    <div class="label-card">
                        <i class="fa fa-user"></i>Jacob Pan
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#linux" title="Category: linux" rel="category">linux</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                    <div class="label-card">
                    
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <a href="/tag/#config" title="Tag: config" rel="tag">config</a>
    
  

</span>

                    </div>
                </div>
                <div class="excerpt">
                    <ul id="markdown-toc">
  <li><a href="#1-安装minicom" id="markdown-toc-1-安装minicom">1. 安装minicom</a></li>
  <li><a href="#2-确定pc串口设备名" id="markdown-toc-2-确定pc串口设备名">2. 确定PC串口设备名</a></li>
  <li><a href="#3-配置minicom" id="markdown-toc-3-配置minicom">3. 配置minicom</a></li>
  <li><a href="#4-退出minicom" id="markdown-toc-4-退出minicom">4. 退出minicom</a></li>
  <li><a href="#5-使用按键映射" id="markdown-toc-5-使用按键映射">5. 使用按键映射</a></li>
  <li><a href="#6-把输出保存到log" id="markdown-toc-6-把输出保存到log">6. 把输出保存到log</a></li>
</ul>

<h2 id="1-安装minicom">1. 安装minicom</h2>

<p>Ubuntu下</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># apt-get install minicom
</code></pre></div></div>

<h2 id="2-确定pc串口设备名">2. 确定PC串口设备名</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dmesg | grep tty
</code></pre></div></div>

<p>我的PC的打印如下:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[    0.000000] console [tty0] enabled
[    0.783396] 00:07: ttyS0 at I/O 0x3f8 (irq = 4, base_baud = 115200) is a 16550A 
</code></pre></div></div>

<p>从第二行可以看出，我的串口是<code class="highlighter-rouge">/dev/ttyS0</code>，若是USB串口，会是<code class="highlighter-rouge">ttyUSB0</code>等字样。</p>

<h2 id="3-配置minicom">3. 配置minicom</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ $LANG=EN    //设置成英文环境
# minicom -s
</code></pre></div></div>

<p>在配置页面中选择<code class="highlighter-rouge">Serial port setup</code></p>
<ol>
  <li>修改<code class="highlighter-rouge">A - Serial Device:</code>为步骤2中找到的窗口设备名，<code class="highlighter-rouge">/dev/ttyS0</code></li>
  <li>修改 F - Hardware Flow Control:<code class="highlighter-rouge">为</code>No`</li>
</ol>

<p>修改完成后按回车键，然后在菜单中选择<code class="highlighter-rouge">Save setup as dfl</code>，再选择<code class="highlighter-rouge">Exit</code>。</p>

<p>配置完成后，就可以通过<code class="highlighter-rouge"># minicom</code>来使用串口了</p>

<h2 id="4-退出minicom">4. 退出minicom</h2>

<p>在minicom中，按<code class="highlighter-rouge">&lt;ctrl a&gt; z</code>进入帮助界面，再按<code class="highlighter-rouge">x</code>或<code class="highlighter-rouge">q</code>就可以退出。</p>

<h2 id="5-使用按键映射">5. 使用按键映射</h2>

<p>在minicom中，按<code class="highlighter-rouge">&lt;ctrl a&gt; z</code>进入帮助界面，O (configure Minicom) - Screen and keyboard - M (Edit Macros)</p>

<h2 id="6-把输出保存到log">6. 把输出保存到log</h2>

<p>在minicom中，按<code class="highlighter-rouge">&lt;ctrl a&gt; z</code>进入帮助界面，L (Capture on/off) - 输入log文件名按回车</p>

<hr />
<blockquote>
  <p>Jacob Pan <a href="http://jacobpan3g.github.io/cn">( jacobpan3g.github.io/cn )</a></p>
</blockquote>

                </div>
                <div class="read-all">
                    <a  href="/2017/10/07/minicom/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
              <li>
                <h2>
                  <a class="post-link" href="/2017/09/01/build-dylib-on-mac/">Mac下编译dylib库</a>
                </h2>
                <div class="label">
                    <div class="label-card">
                        <i class="fa fa-calendar"></i>2017-09-01
                    </div>
                    <div class="label-card">
                        <i class="fa fa-user"></i>Jacob Pan
                        
                    </div>
                    <div class="label-card">
                        
                    </div>

                    <div class="label-card">
                    


<!-- <span class="point">•</span> -->
<span class="categories">
  <i class="fa fa-th-list"></i>
  
    
        <a href="/category/#mac" title="Category: mac" rel="category">mac</a>
    
  

  <!-- <span class="point">•</span> -->
</span>


                    </div>

                    <div class="label-card">
                    
<!-- <span class="point">•</span> -->
<span class="pageTag">
  <i class="fa fa-tags"></i>
  
    
        <a href="/tag/#dylib" title="Tag: dylib" rel="tag">dylib</a>
    
  

</span>

                    </div>
                </div>
                <div class="excerpt">
                    
<p>Mac下的dylib库，其实就是Linux下的动态库<code class="highlighter-rouge">*.so</code>，下面分享一下在mac下面如何编译动态库, 用一个简单的例子说明，首先，创建一下目录结构：</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.
├── libfoo.h
├── libfoo.c
└── main.c
</code></pre></div></div>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// libfoo.h</span>
<span class="cp">#ifndef __LIBFOO_H__
#define __LIBFOO_H__
</span><span class="kt">void</span> <span class="n">lib_function</span><span class="p">();</span>
<span class="cp">#endif
</span></code></pre></div></div>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// libfoo.c</span>
<span class="cp">#include &lt;stdio.h&gt;
</span><span class="kt">void</span> <span class="nf">lib_function</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"dylib hello world</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// main.c</span>
<span class="cp">#include "libfoo.h"
</span><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">lib_function</span><span class="p">();</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>使用一下命令，把<code class="highlighter-rouge">libfoo.dylib</code>编译出来</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gcc -dynamiclib foo.c -o libfoo.dylib
</code></pre></div></div>

<p>然后尝试用<code class="highlighter-rouge">main.c</code>调用这个dylib</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gcc main.c -L. -lfoo -o main
./main
</code></pre></div></div>

<p>若整个过程没有报错，并有以下打印，就说明这个dylib编译成功。</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dylib hello world
</code></pre></div></div>

<hr />
<blockquote>
  <p>Jacob Pan <a href="http://jacobpan3g.github.io/cn">( jacobpan3g.github.io/cn )</a></p>
</blockquote>

                </div>
                <div class="read-all">
                    <a  href="/2017/09/01/build-dylib-on-mac/"><i class="fa fa-newspaper-o"></i>Read All</a>
                </div>
                <hr>
              </li>
            
        </ul>



        <!-- Pagination links -->
        <div class="pagination">
          
            <a href="/index.html" class="previous"><i class="fa fa-angle-double-left"></i></a>
            <a href="/page3" class="previous"><i class="fa fa-angle-left"></i></a>
          
          <span class="page_number ">4/6</span>
          
            <a href="/page5" class="next"><i class="fa fa-angle-right"></i></a>
            <a href="/page6" class="next"><i class="fa fa-angle-double-right"></i></a>
          
        </div>
    </div>
    <!-- <button class="anchor"><i class="fa fa-anchor"></i></button> -->
    <div class="right">
        <div class="wrap">
            <div class="side">
                <div>
                    <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                    Recent Posts
                </div>
                <ul class="content-ul" recent>
                    
                        <li><a href="/2017/12/29/tmux-basic/">tmux使用技巧</a></li>
                    
                        <li><a href="/2017/12/26/useful-tips-in-windows/">Windows一些使用技巧</a></li>
                    
                        <li><a href="/2017/12/26/useful-tips-in-ubuntu/">Ubuntu下的一些使用技巧</a></li>
                    
                        <li><a href="/2017/12/26/install-ubuntu-by-hd-in-xp/">Windows xp下硬盘安装ubuntu</a></li>
                    
                        <li><a href="/2017/12/26/makefile-basic/">Makefile基本</a></li>
                    
                        <li><a href="/2017/12/26/install-centos-by-hd-in-xp/">Windows xp下硬盘安装centos6.4</a></li>
                    
                        <li><a href="/2017/12/26/disk-partition-while-mutli-systems/">安装多系统分区技巧</a></li>
                    
                        <li><a href="/2017/12/26/useful-cmd/">一些有用的命令</a></li>
                    
                        <li><a href="/2017/12/26/git-in-linux/">Linux下使用git</a></li>
                    
                        <li><a href="/2017/12/22/an-error-in-windows-8.1/">Windows8.1下"缺失api-ms-win-crt-heap-l1-1-0.dll"问题的解决方法</a></li>
                    
                </ul>
            </div>

            <!-- Content -->
            <div class="side ">
                <div>
                    <i class="fa fa-th-list"></i>
                    Categories
                </div>
                <ul class="content-ul" cate>
                    
                    <li>
                        <a href="/category/#weibo" class="categories-list-item" cate="weibo">
                            <span class="name">
                                weibo
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#blog" class="categories-list-item" cate="blog">
                            <span class="name">
                                blog
                            </span>
                            <span class="badge">2</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#ubuntu" class="categories-list-item" cate="ubuntu">
                            <span class="name">
                                ubuntu
                            </span>
                            <span class="badge">9</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#mac" class="categories-list-item" cate="mac">
                            <span class="name">
                                mac
                            </span>
                            <span class="badge">2</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#cmd" class="categories-list-item" cate="cmd">
                            <span class="name">
                                cmd
                            </span>
                            <span class="badge">7</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#linux" class="categories-list-item" cate="linux">
                            <span class="name">
                                linux
                            </span>
                            <span class="badge">7</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#windows" class="categories-list-item" cate="windows">
                            <span class="name">
                                windows
                            </span>
                            <span class="badge">3</span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="/category/#c" class="categories-list-item" cate="c">
                            <span class="name">
                                c
                            </span>
                            <span class="badge">1</span>
                        </a>
                    </li>
                    
                </ul>
            </div>
            <!-- 其他div框放到这里 -->
            <div class="side">
                <div>
                    <i class="fa fa-tags"></i>
                    Tags
                </div>
                <div class="tags-cloud">
                    
                    
                    
                    

                    

                    
                      
                      
                      
                      
                      
                      <a href="/tag/#oauth2" style="font-size: 9pt; color: #999;">oauth2</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#jekyll" style="font-size: 10.5pt; color: #777;">jekyll</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#gitment" style="font-size: 9pt; color: #999;">gitment</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#config" style="font-size: 18pt; color: #000;">config</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#install" style="font-size: 13.5pt; color: #444;">install</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#xcode" style="font-size: 9pt; color: #999;">xcode</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#kernel" style="font-size: 9pt; color: #999;">kernel</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#shell" style="font-size: 13.5pt; color: #444;">shell</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#dylib" style="font-size: 9pt; color: #999;">dylib</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#wireless" style="font-size: 9pt; color: #999;">wireless</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#svn" style="font-size: 9pt; color: #999;">svn</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#log" style="font-size: 10.5pt; color: #777;">log</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#qt" style="font-size: 9pt; color: #999;">qt</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#debug" style="font-size: 9pt; color: #999;">debug</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#solution" style="font-size: 9pt; color: #999;">solution</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#git" style="font-size: 9pt; color: #999;">git</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#makefile" style="font-size: 9pt; color: #999;">makefile</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#tips" style="font-size: 10.5pt; color: #777;">tips</a>
                    
                      
                      
                      
                      
                      
                      <a href="/tag/#tmux" style="font-size: 9pt; color: #999;">tmux</a>
                    
                </div>
            </div>

            <!-- <div class="side">
                <div>
                    <i class="fa fa-external-link"></i>
                    Links
                </div>
                <ul  class="content-ul">

                </ul>
            </div> -->
        </div>
    </div>
</div>
<!-- <script src="/js/scroll.min.js " charset="utf-8"></script> -->
<!-- <script src="/js/pageContent.js " charset="utf-8"></script> -->


    <footer class="site-footer">


    <div class="wrapper">

        <p class="description">
             时光沉淀于此！ 
        </p>
        <p class="contact">
            Contact me at: 
            <a href="https://github.com/JacobPan3g" title="GitHub"><i class="fa fa-github" aria-hidden="true"></i></a>  
            <a href="mailto:jacob.pan@foxmail.com" title="email"><i class="fa fa-envelope-o" aria-hidden="true"></i></a>        
        </p>
        <!--
        <p>
            本站总访问量<span id="busuanzi_value_site_pv"></span>次，本站访客数<span id="busuanzi_value_site_uv"></span>人次，本文总阅读量<span id="busuanzi_value_page_pv"></span>次
        </p>
        -->
        <p class="power">
            <span>
                Site powered by <a href="https://jekyllrb.com/">Jekyll</a> & <a href="https://pages.github.com/">Github Pages</a>.
            </span>
            <span>
                Theme designed by <a href="https://github.com/Gaohaoyang">HyG</a>.
            </span>
            <span>
                Blogs written by <a href="https://jacobpan3g.github.io">Jacob Pan</a>.
            </span>
        </p>
    </div>
    
    <script>
        var _hmt = _hmt || [];
        (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?75177901590fba02b71851d2acaee595";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
        })();
    </script>

</footer>
<!--
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
-->

    <div class="back-to-top">
    <a href="#top" data-scroll>
        <i class="fa fa-arrow-up" aria-hidden="true"></i>
    </a>
</div>

    <script src="/js/main.js" charset="utf-8"></script>
    <script src="/js/smooth-scroll.min.js" charset="utf-8"></script>
    <script type="text/javascript">
      smoothScroll.init({
        speed: 500, // Integer. How fast to complete the scroll in milliseconds
        easing: 'easeInOutCubic', // Easing pattern to use
        offset: 20, // Integer. How far to offset the scrolling anchor location in pixels
      });
    </script>
  </body>

</html>
